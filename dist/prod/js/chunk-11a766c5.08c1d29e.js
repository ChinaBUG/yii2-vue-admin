(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-11a766c5"],{1592:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-container"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("sticky",{attrs:{"z-index":10,"class-name":"sub-navbar "+e.form.status}},[a("StatusDropdown",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}}),e._v(" "),a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:e.submit}},[e._v("\n        "+e._s(e.$t("common.submit"))+"\n      ")])],1),e._v(" "),a("div",{staticClass:"form-main-container"},[a("el-form-item",{attrs:{label:e.$t("common.username"),prop:"username"}},[a("el-input",{model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("common.firstName"),prop:"firstName"}},[a("el-input",{model:{value:e.form.firstName,callback:function(t){e.$set(e.form,"firstName",t)},expression:"form.firstName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("common.lastName"),prop:"lastName"}},[a("el-input",{model:{value:e.form.lastName,callback:function(t){e.$set(e.form,"lastName",t)},expression:"form.lastName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("common.email"),prop:"email"}},[a("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("common.password"),prop:"password"}},[a("el-input",{attrs:{"show-password":""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),a("LanguageDropdown",{attrs:{language:e.form.language}}),e._v(" "),a("el-form-item",{attrs:{label:e.$t("common.role"),prop:"roleNames"}},[a("el-select",{attrs:{"remote-method":e.getRoles,filterable:"",multiple:"","default-first-option":"",remote:"",placeholder:"Roles"},model:{value:e.form.roleNames,callback:function(t){e.$set(e.form,"roleNames",t)},expression:"form.roleNames"}},e._l(e.roleOptions,(function(e){return a("el-option",{key:e.name,attrs:{value:e.name,label:e.description}})})),1)],1)],1)],1)],1)},r=[],i=(a("c5f6"),a("c24f")),o=a("cc5e"),n=a("b804"),l=a("77ac"),m={username:"",firstName:"",lastName:"",password:"",email:"",language:"en",status:1,roleNames:[]},u={name:"Detail",components:{Sticky:n["a"],StatusDropdown:l["b"],LanguageDropdown:l["a"]},props:{id:{type:Number,default:0}},data:function(){return{form:Object.assign({},m),loading:!1,roleOptions:[],roles:[],rules:{username:[{required:!0,message:this.$t("validate.required",{field:this.$t("common.username")}),trigger:"blur"}],firstName:[{required:!0,message:this.$t("validate.required",{field:this.$t("common.firstName")}),trigger:"blur"}],lastName:[{required:!0,message:this.$t("validate.required",{field:this.$t("common.lastName")}),trigger:"blur"}],email:[{required:!0,message:this.$t("validate.required",{field:this.$t("common.email")}),trigger:"blur"}],language:[{required:!0,message:this.$t("validate.required",{field:this.$t("common.language")}),trigger:"blur"}],password:[{required:!this.isEdit(),message:this.$t("validate.required",{field:this.$t("common.password")}),trigger:"blur"}],roleNames:[{required:!0,message:this.$t("validate.required",{field:this.$t("common.role")}),trigger:"blur"}]},tempRoute:{}}},created:function(){this.getDetail(),this.tempRoute=Object.assign({},this.$route)},methods:{isEdit:function(){return this.id>0},getDetail:function(){var e=this;this.isEdit()?Object(i["d"])(this.id,{expand:"role_names"}).then((function(t){e.form.username=t.data.username,e.form.firstName=t.data.first_name,e.form.lastName=t.data.last_name,e.form.email=t.data.email,e.form.status=t.data.status,e.form.language=t.data.language,e.form.roleNames=t.data.role_names,e.setTagsViewTitle(),e.setPageTitle()})).catch((function(e){console.log(e)})):this.form=Object.assign({},m)},setTagsViewTitle:function(){var e=this.$t("route.userEdit"),t=Object.assign({},this.tempRoute,{title:"".concat(e," #").concat(this.form.username)});this.$store.dispatch("tagsView/updateVisitedView",t)},setPageTitle:function(){var e=this.$t("route.userCreate");document.title="".concat(e," - ").concat(this.form.id)},submit:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return console.log("error submit!!"),!1;e.loading=!0;var a={username:e.form.username,first_name:e.form.firstName,last_name:e.form.lastName,email:e.form.email,status:e.form.status,password:e.form.password,language:e.form.language,role_names:e.form.roleNames};e.isEdit()?Object(i["i"])(e.id,a).then((function(t){e.success()})):Object(i["b"])(a).then((function(t){e.success(t.data.id)})),e.loading=!1}))},success:function(e){this.$notify({title:this.$t("common.success"),message:this.isEdit()?this.$t("common.updateSuccessfully"):this.$t("common.createSuccessfully"),type:"success",duration:2e3}),this.isEdit()?this.getDetail():this.$router.push({name:"userEdit",params:{id:e}})},getRoles:function(e){var t=this;Object(o["d"])({filter:{name:e}}).then((function(e){t.roleOptions=e.data.items}))}}},c=u,f=(a("993d"),a("2877")),d=Object(f["a"])(c,s,r,!1,null,"120e0a5e",null);t["a"]=d.exports},"6cfd":function(e,t,a){},"993d":function(e,t,a){"use strict";var s=a("6cfd"),r=a.n(s);r.a},cc5e:function(e,t,a){"use strict";a.d(t,"d",(function(){return o})),a.d(t,"a",(function(){return n})),a.d(t,"e",(function(){return l})),a.d(t,"c",(function(){return m})),a.d(t,"b",(function(){return u}));var s=a("b775"),r=a("4328"),i=a.n(r);function o(e){return Object(s["a"])({url:"/roles?"+i.a.stringify(e),method:"get"})}function n(e){return Object(s["a"])({url:"/roles",method:"post",data:e})}function l(e,t){return Object(s["a"])({url:"/roles/"+e,method:"put",data:t})}function m(e,t){return Object(s["a"])({url:"/roles/"+e+"?"+i.a.stringify(t),method:"get"})}function u(e){return Object(s["a"])({url:"/roles/"+e,method:"delete"})}},d344:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("detail",{attrs:{id:e.id}})},r=[],i=a("1592"),o={name:"EditForm",components:{Detail:i["a"]},data:function(){return{id:parseInt(this.$route.params.id)}}},n=o,l=a("2877"),m=Object(l["a"])(n,s,r,!1,null,null,null);t["default"]=m.exports}}]);