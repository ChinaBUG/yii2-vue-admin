(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b04e0f6"],{"281e":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-container"},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[i("sticky",{attrs:{"z-index":10,"class-name":"sub-navbar"}},[i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:e.submit}},[e._v("\n        "+e._s(e.$t("common.submit"))+"\n      ")])],1),e._v(" "),i("div",{staticClass:"form-main-container"},[i("el-form-item",{attrs:{label:e.$t("common.name"),prop:"name"}},[i("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("common.description"),prop:"description"}},[i("el-input",{model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("common.permission"),prop:"permissionNames"}},[i("el-checkbox-group",{model:{value:e.form.permissionNames,callback:function(t){e.$set(e.form,"permissionNames",t)},expression:"form.permissionNames"}},e._l(e.permissions,(function(t){return i("el-checkbox",{key:t.name,attrs:{label:t.name}},[e._v("\n            "+e._s(t.description)+"\n          ")])})),1)],1)],1)],1)],1)},s=[],r=(i("7f7f"),i("cc5e")),o=i("b775"),a=i("4328"),c=i.n(a);function m(e){return Object(o["a"])({url:"/permissions?"+c.a.stringify(e),method:"get"})}var u=i("b804"),l={name:"",description:"",permissionNames:[]},f={name:"Detail",components:{Sticky:u["a"]},props:{id:{type:String,default:""}},data:function(){return{form:Object.assign({},l),loading:!1,rules:{name:[{required:!0,message:this.$t("validate.required",{field:this.$t("common.name")}),trigger:"blur"}],description:[{required:!0,message:this.$t("validate.required",{field:this.$t("common.description")}),trigger:"blur"}],permissionNames:[{type:"array",required:!0,message:this.$t("validate.required",{field:this.$t("common.permission")}),trigger:"blur"}]},tempRoute:{},permissions:[]}},created:function(){this.fillUpPermissions(),this.getDetail(),this.tempRoute=Object.assign({},this.$route)},methods:{isEdit:function(){return""!==this.id},fillUpPermissions:function(){var e=this;m().then((function(t){e.permissions=t.data.items})).catch((function(e){console.log(e)}))},getDetail:function(){var e=this;this.isEdit()?Object(r["c"])(this.id,{expand:"permission_names"}).then((function(t){e.form.name=t.data.name,e.form.description=t.data.description,e.form.permissionNames=t.data.permission_names,e.setTagsViewTitle(),e.setPageTitle()})).catch((function(e){console.log(e)})):this.form=Object.assign({},l)},setTagsViewTitle:function(){var e=this.$t("route.roleEdit"),t=Object.assign({},this.tempRoute,{title:"".concat(e," #").concat(this.form.name)});this.$store.dispatch("tagsView/updateVisitedView",t)},setPageTitle:function(){var e=this.$t("route.roleEdit");document.title="".concat(e," - ").concat(this.form.name)},submit:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return console.log("error submit!!"),!1;e.loading=!0;var i={name:e.form.name,description:e.form.description,permission_names:e.form.permissionNames};e.isEdit()?Object(r["e"])(e.id,i).then((function(t){e.success(t.data.name)})):Object(r["a"])(i).then((function(t){e.success(t.data.name)})),e.loading=!1}))},success:function(e){this.$notify({title:this.$t("common.success"),message:this.isEdit()?this.$t("common.updateSuccessfully"):this.$t("common.createSuccessfully"),type:"success",duration:2e3}),this.$router.push({name:"roleEdit",params:{id:e}})}}},d=f,p=(i("6de5"),i("2877")),h=Object(p["a"])(d,n,s,!1,null,"4b3c8427",null);t["a"]=h.exports},"584f":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("detail")},s=[],r=i("281e"),o={name:"CreateForm",components:{Detail:r["a"]}},a=o,c=i("2877"),m=Object(c["a"])(a,n,s,!1,null,null,null);t["default"]=m.exports},"6de5":function(e,t,i){"use strict";var n=i("f2cf"),s=i.n(n);s.a},cc5e:function(e,t,i){"use strict";i.d(t,"d",(function(){return o})),i.d(t,"a",(function(){return a})),i.d(t,"e",(function(){return c})),i.d(t,"c",(function(){return m})),i.d(t,"b",(function(){return u}));var n=i("b775"),s=i("4328"),r=i.n(s);function o(e){return Object(n["a"])({url:"/roles?"+r.a.stringify(e),method:"get"})}function a(e){return Object(n["a"])({url:"/roles",method:"post",data:e})}function c(e,t){return Object(n["a"])({url:"/roles/"+e,method:"put",data:t})}function m(e,t){return Object(n["a"])({url:"/roles/"+e+"?"+r.a.stringify(t),method:"get"})}function u(e){return Object(n["a"])({url:"/roles/"+e,method:"delete"})}},f2cf:function(e,t,i){}}]);